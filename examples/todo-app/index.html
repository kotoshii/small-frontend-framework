<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Todo App Example</title>
    <script src=></script>
</head>
<body>
    <script type="module">
      import {
        createApp,
        fragment,
        getStore,
        h,
        state,
      } from '../../dist/runtime/sff.js';

      function App() {
        const store = getStore();
        const {
          data: { todos },
        } = store;
        const [inputValue, setInputValue] = state('');

        const handleButtonClick = () => {
          if (inputValue) {
            store.dispatch('addTodo', inputValue);
            setInputValue('');
          }
        };

        return fragment([
          h('h1', {}, ['Todo list']),
          h(
            'ul',
            {},
            todos.map((todo) => h('li', {}, [todo])),
          ),
          h('input', {
            placeholder: 'Enter todo text...',
            type: 'text',
            on: {
              change: (event) => setInputValue(event.target.value),
            },
            value: inputValue,
          }),
          h('button', { on: { click: handleButtonClick } }, ['Add todo']),
        ]);
      }

      createApp({
        state: {
          todos: [],
        },
        reducers: {
          addTodo: (state, payload) => ({
            ...state,
            todos: [...state.todos, payload],
          }),
        },
        view: App,
      }).mount(document.body);
    </script>
</body>
</html>